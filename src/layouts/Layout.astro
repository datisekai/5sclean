---
import Logo from '../components/Logo.astro';
import '../styles/global.css';
import zaloIcon from '../assets/icons/zalo.png';
export interface Props {
  title: string;
  description?: string;
  image?: string;
  canonical?: string;
}

const { 
  title, 
  description = "5S Clean - Dịch vụ vệ sinh công nghiệp chuyên nghiệp, uy tín hàng đầu. Chúng tôi cung cấp các dịch vụ vệ sinh toàn diện cho doanh nghiệp và hộ gia đình.",
  image = "/og-image.jpg",
  canonical = Astro.url.href

} = Astro.props;

const siteName = "5S Clean";
const fullTitle = `${title} | ${siteName}`;
---

<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- SEO Meta Tags -->
    <title>{fullTitle}</title>
    <meta name="description" content={description} />
    <meta name="keywords" content="vệ sinh công nghiệp, dịch vụ vệ sinh, tạp vụ định kỳ, tổng vệ sinh, giặt thảm, sofa, ghế, 5S Clean" />
    <meta name="author" content="5S Clean" />
    <meta name="robots" content="index, follow" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonical} />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={new URL(image, Astro.url)} />
    <meta property="og:site_name" content={siteName} />
    <meta property="og:locale" content="vi_VN" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonical} />
    <meta property="twitter:title" content={fullTitle} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={new URL(image, Astro.url)} />
    
    <!-- Canonical URL -->
    <link rel="canonical" href={canonical} />
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  </head>
  <body class="bg-white text-gray-dark">
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-sm border-b border-gray-200 shadow-sm">
      <nav class="container-custom px-4 py-4">
        <div class="flex items-center justify-between">
          <!-- Logo -->
          <Logo size="lg" />
          
          <!-- Desktop Navigation -->
          <div class="hidden lg:flex items-center space-x-8">
            <a href="/" class="nav-link">Trang chủ</a>
            <a href="/gioi-thieu" class="nav-link">Giới thiệu</a>
            <div class="relative group">
              <button class="nav-link flex items-center space-x-1">
                <span>Dịch vụ</span>
                <i class="fas fa-chevron-down text-xs"></i>
              </button>
              <div class="absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300">
                <div class="py-2">
                  <a href="/tap-vu-dinh-ky" class="block px-4 py-2 text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors">Tạp vụ định kỳ</a>
                  <a href="/tong-ve-sinh" class="block px-4 py-2 text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors">Tổng vệ sinh</a>
                  <a href="/giat-tham-sofa" class="block px-4 py-2 text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors">Giặt thảm, sofa, ghế</a>
                </div>
              </div>
            </div>
            <a href="/tin-tuc" class="nav-link">Tin tức</a>
            <a href="/lien-he" class="nav-link">Liên hệ</a>
          </div>
          
          <!-- Search and Mobile Menu -->
          <div class="flex items-center space-x-4">
            <!-- Search Button -->
            <button class="p-2 text-gray-600 hover:text-primary transition-colors" id="searchBtn">
              <i class="fas fa-search"></i>
            </button>
            
            <!-- Mobile Menu Button -->
            <button class="lg:hidden p-2 text-gray-600 hover:text-primary transition-colors" id="mobileMenuBtn">
              <i class="fas fa-bars"></i>
            </button>
            
            <!-- Contact Buttons -->
            <div class="hidden sm:flex items-center space-x-2">
              <a href="tel:0123456789" class="btn-primary text-sm px-4 py-2">
                <i class="fas fa-phone mr-1"></i>
                Gọi ngay
              </a>
            </div>
          </div>
        </div>
        
        <!-- Mobile Menu -->
        <div class="lg:hidden hidden" id="mobileMenu">
          <div class="py-4 space-y-4 border-t border-gray-200 mt-4">
            <a href="/" class="block py-2 text-gray-700 hover:text-primary transition-colors">Trang chủ</a>
            <a href="/gioi-thieu" class="block py-2 text-gray-700 hover:text-primary transition-colors">Giới thiệu</a>
            <div class="space-y-2">
              <div class="font-medium text-gray-900">Dịch vụ</div>
              <a href="/tap-vu-dinh-ky" class="block py-2 pl-4 text-gray-700 hover:text-primary transition-colors">Tạp vụ định kỳ</a>
              <a href="/tong-ve-sinh" class="block py-2 pl-4 text-gray-700 hover:text-primary transition-colors">Tổng vệ sinh</a>
              <a href="/giat-tham-sofa" class="block py-2 pl-4 text-gray-700 hover:text-primary transition-colors">Giặt thảm, sofa, ghế</a>
            </div>
            <a href="/tin-tuc" class="block py-2 text-gray-700 hover:text-primary transition-colors">Tin tức</a>
            <a href="/lien-he" class="block py-2 text-gray-700 hover:text-primary transition-colors">Liên hệ</a>
          </div>
        </div>
      </nav>
    </header>

    <!-- Search Modal -->
    <div class="fixed inset-0 bg-black/50 z-50 hidden" id="searchModal">
      <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-lg w-full max-w-2xl p-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold">Tìm kiếm bài viết</h3>
            <button class="text-gray-500 hover:text-gray-700" id="closeSearchBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="relative">
            <input 
              type="text" 
              placeholder="Nhập từ khóa tìm kiếm..." 
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
              id="searchInput"
            >
            <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary">
              <i class="fas fa-search"></i>
            </button>
          </div>
          <div id="searchResults" class="mt-4 max-h-96 overflow-y-auto"></div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <main class="pt-20">
      <slot />
    </main>

    <!-- Floating Contact Buttons -->
    <div class="fixed bottom-6 right-6 z-40 space-y-3">
      <!-- Zalo Button -->
      <a href="https://zalo.me/0123456789" target="_blank" rel="noopener noreferrer" 
         class="block w-14 h-14 bg-blue-500 text-white rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-transform animate-pulse-gentle">
        <img src={'/icons/zalo.png'} alt="Zalo" class="w-10 h-10" />
      </a>
      
      <!-- Phone Button -->
      <a href="tel:0123456789" 
         class="block w-14 h-14 bg-primary text-white rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-transform animate-bounce-gentle">
        <i class="fas fa-phone text-xl"></i>
      </a>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-dark text-white">
      <div class="container-custom section-padding">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          <!-- Company Info -->
          <div class="space-y-4">
            <div class="flex items-center space-x-2">
              <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                <span class="text-white font-bold text-xl">5S</span>
              </div>
              <span class="text-xl font-bold">Clean</span>
            </div>
            <p class="text-gray-300">
              Dịch vụ vệ sinh công nghiệp chuyên nghiệp, uy tín hàng đầu với hơn 10 năm kinh nghiệm.
            </p>
            <div class="flex space-x-4">
              <a href="#" class="text-gray-300 hover:text-white transition-colors">
                <i class="fab fa-facebook text-xl"></i>
              </a>
              <a href="#" class="text-gray-300 hover:text-white transition-colors">
                <i class="fab fa-youtube text-xl"></i>
              </a>
              <a href="#" class="text-gray-300 hover:text-white transition-colors">
                <i class="fab fa-tiktok text-xl"></i>
              </a>
            </div>
          </div>
          
          <!-- Services -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Dịch vụ</h3>
            <ul class="space-y-2">
              <li><a href="/tap-vu-dinh-ky" class="text-gray-300 hover:text-white transition-colors">Tạp vụ định kỳ</a></li>
              <li><a href="/tong-ve-sinh" class="text-gray-300 hover:text-white transition-colors">Tổng vệ sinh</a></li>
              <li><a href="/giat-tham-sofa" class="text-gray-300 hover:text-white transition-colors">Giặt thảm, sofa, ghế</a></li>
              <li><a href="/ve-sinh-cong-nghiep" class="text-gray-300 hover:text-white transition-colors">Vệ sinh công nghiệp</a></li>
            </ul>
          </div>
          
          <!-- Quick Links -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Liên kết</h3>
            <ul class="space-y-2">
              <li><a href="/gioi-thieu" class="text-gray-300 hover:text-white transition-colors">Giới thiệu</a></li>
              <li><a href="/tin-tuc" class="text-gray-300 hover:text-white transition-colors">Tin tức</a></li>
              <li><a href="/lien-he" class="text-gray-300 hover:text-white transition-colors">Liên hệ</a></li>
              <li><a href="/chinh-sach" class="text-gray-300 hover:text-white transition-colors">Chính sách</a></li>
            </ul>
          </div>
          
          <!-- Contact Info -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Liên hệ</h3>
            <div class="space-y-3">
              <div class="flex items-center space-x-3">
                <i class="fas fa-map-marker-alt text-primary"></i>
                <span class="text-gray-300">123 Đường ABC, Quận 1, TP.HCM</span>
              </div>
              <div class="flex items-center space-x-3">
                <i class="fas fa-phone text-primary"></i>
                <span class="text-gray-300">0123 456 789</span>
              </div>
              <div class="flex items-center space-x-3">
                <i class="fas fa-envelope text-primary"></i>
                <span class="text-gray-300">info@5sclean.com</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="border-t border-gray-700 mt-8 pt-8 text-center">
          <p class="text-gray-300">
            © 2025 5S Clean. Tất cả quyền được bảo lưu.
          </p>
        </div>
      </div>
    </footer>

    <style>
		@reference "../styles/global.css";
      .nav-link {
        @apply text-gray-700 hover:text-primary transition-colors font-medium;
      }
    </style>

    <script>
      // Mobile Menu Toggle
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const mobileMenu = document.getElementById('mobileMenu');
      
      mobileMenuBtn?.addEventListener('click', () => {
        mobileMenu?.classList.toggle('hidden');
      });
      
      // Search Modal Toggle
      const searchBtn = document.getElementById('searchBtn');
      const searchModal = document.getElementById('searchModal');
      const closeSearchBtn = document.getElementById('closeSearchBtn');
      const searchInput = document.getElementById('searchInput');
      
      searchBtn?.addEventListener('click', () => {
        searchModal?.classList.remove('hidden');
        searchInput?.focus();
      });
      
      closeSearchBtn?.addEventListener('click', () => {
        searchModal?.classList.add('hidden');
      });
      
      // Close modal when clicking outside
      searchModal?.addEventListener('click', (e) => {
        if (e.target === searchModal) {
          searchModal.classList.add('hidden');
        }
      });
      
      // Search functionality
      searchInput?.addEventListener('input', (e) => {
        const target = e.target as HTMLInputElement;
        const query = target.value;
        const searchResults = document.getElementById('searchResults');
        
        if (query.length > 2 && searchResults) {
          // Here you would typically make an API call to search
          // For now, we'll show a placeholder
          searchResults.innerHTML = `
            <div class="text-gray-500 text-center py-4">
              Đang tìm kiếm: "${query}"
            </div>
          `;
        } else if (searchResults) {
          searchResults.innerHTML = '';
        }
      });
    </script>
  </body>
</html>
